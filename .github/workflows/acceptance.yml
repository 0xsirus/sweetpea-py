name: Acceptance tests

on: [push, pull_request]

jobs:
  run:
    name: ${{ matrix.os }}
    strategy:
       matrix:
         # NOTE: We explicitly use macOS 10.15 for clarity. As of this writing,
         #       the `macos-latest` runner is just an alias for `macos-10.15`.
         #       Big Sur support is currently in early preview and is not yet
         #       publicly available.
         # TODO: Check back at the following page (under the
         #       `jobs.<job_id>.runs-on` heading) to see if we can update to Big
         #       Sur yet:
         #           https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on
         os: [ubuntu-latest, macos-10.15, windows-latest]
         python-version: ['3.7.9', '3.8', '3.9']
    steps:
      - name: Checkout SweetPea
        uses: actions/checkout@v2
      - name: Set up Python ${{ matrix.python-version }}
        uses: actions/setup-python@v2
        with:
          python-version: ${{ matrix.python-version }}
      - name: Set up SweetPea's Python package dependencies
        run: pip install -r requirements.txt
      - name: Run acceptance tests
        run: python -m pytest -p no:warnings acceptance
